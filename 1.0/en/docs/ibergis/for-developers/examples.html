<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4. Examples &mdash; IberGIS Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/ibergis_docs.css?v=3f46d377" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/logo.png"/>
    <link rel="canonical" href="https://ibergis.github.io/testing/en/docs/ibergis/for-developers/examples.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="IberGIS Administrator Guide" href="../for-admins/index.html" />
    <link rel="prev" title="3. Python code" href="python.html" />
<meta
	name="description"
	content="IberGIS 1.0 documentation: 4. Examples"
/>
</head>

<body class="wy-body-for-nav">

<nav class="release_status_topbar">
</nav>

  
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" > 

          
          
          <a href="../../index.html" class="icon icon-home">
            IberGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<a href="../../../genindex.html">Index</a>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">FOR USERS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../for-users/user-manual/index.html">IberGIS User Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FOR DEVELOPERS</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="dbmodel.html">2. DB Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">3. Python code</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4. Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#typical-development-tasks">4.1. Typical development tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-1-creating-a-new-processing-algorithm">4.2. Example 1 – Creating a new Processing algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#locate-the-processing-package">4.2.1. Locate the Processing package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-and-register-the-algorithm">4.2.2. Create and register the algorithm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-2-adding-a-new-toolbar-button-and-dialog">4.3. Example 2 – Adding a new toolbar button and dialog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decide-where-the-feature-belongs">4.3.1. Decide where the feature belongs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-the-dialog">4.3.2. Create the dialog</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wire-the-dialog-to-a-toolbar-button">4.3.3. Wire the dialog to a toolbar button</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-3-using-configuration-and-global-state">4.4. Example 3 – Using configuration and global state</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#define-the-configuration-key">4.4.1. Define the configuration key</a></li>
<li class="toctree-l4"><a class="reference internal" href="#read-and-write-the-setting-in-code">4.4.2. Read and write the setting in code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-4-modifying-a-database-table">4.5. Example 4 – Modifying a database table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scenario">4.5.1. Scenario</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-1-modify-ddl-for-new-projects">4.5.2. Step 1 – Modify DDL for new projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-modify-dml-for-default-data">4.5.3. Step 2 – Modify DML for default data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-add-an-update-script-for-existing-projects">4.5.4. Step 3 – Add an update script for existing projects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#versioning-and-testing">4.6. Versioning and testing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FOR ADMINISTRATORS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../for-admins/index.html">Administrator Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IberGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">IberGIS Developer Guide</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4. </span>Examples</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/IberGIS/IberGIS-Documentation/blob/master/docs/ibergis/for-developers/examples.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="python.html" class="btn btn-neutral float-left" title="3. Python code" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../for-admins/index.html" class="btn btn-neutral float-right" title="IberGIS Administrator Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="examples">
<h1><span class="section-number">4. </span>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#typical-development-tasks" id="id1">Typical development tasks</a></p></li>
<li><p><a class="reference internal" href="#example-1-creating-a-new-processing-algorithm" id="id2">Example 1 – Creating a new Processing algorithm</a></p>
<ul>
<li><p><a class="reference internal" href="#locate-the-processing-package" id="id3">Locate the Processing package</a></p></li>
<li><p><a class="reference internal" href="#create-and-register-the-algorithm" id="id4">Create and register the algorithm</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#example-2-adding-a-new-toolbar-button-and-dialog" id="id5">Example 2 – Adding a new toolbar button and dialog</a></p>
<ul>
<li><p><a class="reference internal" href="#decide-where-the-feature-belongs" id="id6">Decide where the feature belongs</a></p></li>
<li><p><a class="reference internal" href="#create-the-dialog" id="id7">Create the dialog</a></p></li>
<li><p><a class="reference internal" href="#wire-the-dialog-to-a-toolbar-button" id="id8">Wire the dialog to a toolbar button</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#example-3-using-configuration-and-global-state" id="id9">Example 3 – Using configuration and global state</a></p>
<ul>
<li><p><a class="reference internal" href="#define-the-configuration-key" id="id10">Define the configuration key</a></p></li>
<li><p><a class="reference internal" href="#read-and-write-the-setting-in-code" id="id11">Read and write the setting in code</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#example-4-modifying-a-database-table" id="id12">Example 4 – Modifying a database table</a></p>
<ul>
<li><p><a class="reference internal" href="#scenario" id="id13">Scenario</a></p></li>
<li><p><a class="reference internal" href="#step-1-modify-ddl-for-new-projects" id="id14">Step 1 – Modify DDL for new projects</a></p></li>
<li><p><a class="reference internal" href="#step-2-modify-dml-for-default-data" id="id15">Step 2 – Modify DML for default data</a></p></li>
<li><p><a class="reference internal" href="#step-3-add-an-update-script-for-existing-projects" id="id16">Step 3 – Add an update script for existing projects</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#versioning-and-testing" id="id17">Versioning and testing</a></p></li>
</ul>
</nav>
<p>This section provides practical, high‑level examples for developers working
with the IberGIS plugin. The goal is to illustrate <strong>typical workflows</strong>,
not to document every implementation detail.</p>
<p>The examples below build on the concepts described in <a class="reference internal" href="python.html"><span class="doc">Python code</span></a> and
<a class="reference internal" href="dbmodel.html"><span class="doc">DB Model</span></a>.</p>
<section id="typical-development-tasks">
<h2><a class="toc-backref" href="#id1" role="doc-backlink"><span class="section-number">4.1. </span>Typical development tasks</a><a class="headerlink" href="#typical-development-tasks" title="Link to this heading"></a></h2>
<p>Common changes you will perform in IberGIS include:</p>
<ul class="simple">
<li><p>Adding or modifying <strong>QGIS Processing algorithms</strong>.</p></li>
<li><p>Creating new <strong>toolbars, buttons or dialogs</strong>.</p></li>
<li><p>Reading and writing <strong>configuration values</strong> for new features.</p></li>
<li><p>Evolving the <strong>database model</strong> while keeping existing projects working.</p></li>
</ul>
<p>The following sections walk through representative examples of each area.</p>
</section>
<section id="example-1-creating-a-new-processing-algorithm">
<h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="section-number">4.2. </span>Example 1 – Creating a new Processing algorithm</a><a class="headerlink" href="#example-1-creating-a-new-processing-algorithm" title="Link to this heading"></a></h2>
<p>This example describes the typical steps to add a new QGIS Processing
algorithm to IberGIS.</p>
<section id="locate-the-processing-package">
<h3><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">4.2.1. </span>Locate the Processing package</a><a class="headerlink" href="#locate-the-processing-package" title="Link to this heading"></a></h3>
<p>Processing algorithms are implemented under the plugin root in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">/</span><span class="n">processing</span><span class="o">/</span>
</pre></div>
</div>
<p>Each <code class="docutils literal notranslate"><span class="pre">*.py</span></code> file usually exposes one or more algorithms that appear in the
QGIS Processing Toolbox under the IberGIS groups.</p>
</section>
<section id="create-and-register-the-algorithm">
<h3><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">4.2.2. </span>Create and register the algorithm</a><a class="headerlink" href="#create-and-register-the-algorithm" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Choose a clear, descriptive name for your algorithm file, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">/</span><span class="n">processing</span><span class="o">/</span><span class="n">check_custom_rule</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p>Implement your algorithm class following the standard QGIS Processing API
(subclassing <code class="docutils literal notranslate"><span class="pre">QgsProcessingAlgorithm</span></code>). Reuse utilities from
<code class="docutils literal notranslate"><span class="pre">lib/tools_qgis.py</span></code> and <code class="docutils literal notranslate"><span class="pre">core/utils</span></code> whenever possible for
logging, configuration and data access.</p></li>
<li><p>Keep line length under 120 characters and follow the naming conventions
described in <a class="reference internal" href="python.html"><span class="doc">Python code</span></a>.</p></li>
<li><p>Register the algorithm in the appropriate provider file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">/</span><span class="n">processing</span><span class="o">/</span><span class="n">drain_provider</span><span class="o">.</span><span class="n">py</span>
<span class="n">core</span><span class="o">/</span><span class="n">processing</span><span class="o">/</span><span class="n">drain_mesh_provider</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Import your new algorithm class.</p></li>
<li><p>Add an instance of it in the provider’s <code class="docutils literal notranslate"><span class="pre">loadAlgorithms</span></code> (or
equivalent) method.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">tools_qt.tr</span></code> for user‑visible names and group labels.</p></li>
</ul>
</li>
<li><p>Reload the plugin in QGIS and verify that the algorithm appears in the
Processing Toolbox and behaves as expected.</p></li>
</ol>
</section>
</section>
<section id="example-2-adding-a-new-toolbar-button-and-dialog">
<h2><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">4.3. </span>Example 2 – Adding a new toolbar button and dialog</a><a class="headerlink" href="#example-2-adding-a-new-toolbar-button-and-dialog" title="Link to this heading"></a></h2>
<p>This example shows how to expose new functionality through the QGIS GUI.</p>
<section id="decide-where-the-feature-belongs">
<h3><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">4.3.1. </span>Decide where the feature belongs</a><a class="headerlink" href="#decide-where-the-feature-belongs" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core logic</strong> for the feature should live in <code class="docutils literal notranslate"><span class="pre">core</span></code> or <code class="docutils literal notranslate"><span class="pre">core/utils</span></code>.</p></li>
<li><p><strong>UI elements</strong> (dialogs, dock widgets) should live under <code class="docutils literal notranslate"><span class="pre">core/ui</span></code>.</p></li>
<li><p><strong>Toolbar/button wiring</strong> usually lives under <code class="docutils literal notranslate"><span class="pre">core/toolbars</span></code> or is
triggered from <code class="docutils literal notranslate"><span class="pre">main.py</span></code> / <code class="docutils literal notranslate"><span class="pre">core/load_project_menu.py</span></code>.</p></li>
</ul>
</section>
<section id="create-the-dialog">
<h3><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">4.3.2. </span>Create the dialog</a><a class="headerlink" href="#create-the-dialog" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Design a new form using Qt Designer and save it under:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">/</span><span class="n">ui</span><span class="o">/&lt;</span><span class="n">area</span><span class="o">&gt;/&lt;</span><span class="n">dialog_name</span><span class="o">&gt;.</span><span class="n">ui</span>
</pre></div>
</div>
</li>
<li><p>Use the existing <code class="docutils literal notranslate"><span class="pre">ui_manager.py</span></code> helpers to load the form or generate
a Python wrapper (for example, a <code class="docutils literal notranslate"><span class="pre">DrDialog</span></code> subclass) that encapsulates
the business logic.</p></li>
</ol>
</section>
<section id="wire-the-dialog-to-a-toolbar-button">
<h3><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">4.3.3. </span>Wire the dialog to a toolbar button</a><a class="headerlink" href="#wire-the-dialog-to-a-toolbar-button" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Identify the toolbar class you want to extend under:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">/</span><span class="n">toolbars</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>Add a new <code class="docutils literal notranslate"><span class="pre">QAction</span></code> with an icon from <code class="docutils literal notranslate"><span class="pre">icons/toolbars</span></code> and connect
its <code class="docutils literal notranslate"><span class="pre">triggered</span></code> signal to a small function that opens your dialog.</p></li>
<li><p>If the toolbar is created dynamically depending on the project type,
make sure your new button is added in the same code path (for example, in
the methods that run after a project is loaded from <code class="docutils literal notranslate"><span class="pre">main.py</span></code>).</p></li>
<li><p>Reload the plugin, open a project and confirm that the new button appears
and correctly opens the dialog.</p></li>
</ol>
</section>
</section>
<section id="example-3-using-configuration-and-global-state">
<h2><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">4.4. </span>Example 3 – Using configuration and global state</a><a class="headerlink" href="#example-3-using-configuration-and-global-state" title="Link to this heading"></a></h2>
<p>Many IberGIS features are controlled by configuration files and global
variables. This example shows how to add a new user‑configurable option.</p>
<section id="define-the-configuration-key">
<h3><a class="toc-backref" href="#id10" role="doc-backlink"><span class="section-number">4.4.1. </span>Define the configuration key</a><a class="headerlink" href="#define-the-configuration-key" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Decide whether the setting belongs to <strong>user config</strong> (per installation)
or <strong>project config</strong> (per project). See the explanations in
<a class="reference internal" href="python.html"><span class="doc">Python code</span></a> and <a class="reference internal" href="dbmodel.html"><span class="doc">DB Model</span></a>.</p></li>
<li><p>Add a new key in the appropriate section of the configuration file, for
example in <code class="docutils literal notranslate"><span class="pre">config/drain.config</span></code> or <code class="docutils literal notranslate"><span class="pre">config/user_params.config</span></code>.</p></li>
</ol>
</section>
<section id="read-and-write-the-setting-in-code">
<h3><a class="toc-backref" href="#id11" role="doc-backlink"><span class="section-number">4.4.2. </span>Read and write the setting in code</a><a class="headerlink" href="#read-and-write-the-setting-in-code" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Use the helpers in <code class="docutils literal notranslate"><span class="pre">core.utils.tools_dr</span></code> to access configuration
values, for example <code class="docutils literal notranslate"><span class="pre">get_config_parser()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_config_parser()</span></code>.</p></li>
<li><p>If the setting must be available globally during the session, store it in
an appropriate variable in <code class="docutils literal notranslate"><span class="pre">global_vars</span></code> (for example in
<code class="docutils literal notranslate"><span class="pre">plugin_settings</span></code> or inside <code class="docutils literal notranslate"><span class="pre">session_vars</span></code>).</p></li>
<li><p>Update any relevant dialogs so that users can change the setting from the
UI when necessary (usually via forms defined under <code class="docutils literal notranslate"><span class="pre">core/ui</span></code>).</p></li>
<li><p>Avoid creating new, unrelated globals; prefer extending the existing
structures in <code class="docutils literal notranslate"><span class="pre">global_vars.py</span></code>.</p></li>
</ol>
</section>
</section>
<section id="example-4-modifying-a-database-table">
<h2><a class="toc-backref" href="#id12" role="doc-backlink"><span class="section-number">4.5. </span>Example 4 – Modifying a database table</a><a class="headerlink" href="#example-4-modifying-a-database-table" title="Link to this heading"></a></h2>
<p>IberGIS stores its project data in GeoPackage files created from SQL scripts
in the <code class="docutils literal notranslate"><span class="pre">dbmodel/</span></code> directory. When you change the schema you <strong>must</strong>
carefully update both the base DDL/DML and the corresponding <code class="docutils literal notranslate"><span class="pre">updates/</span></code>
sub‑folder if this change is part of a new plugin version.</p>
<section id="scenario">
<h3><a class="toc-backref" href="#id13" role="doc-backlink"><span class="section-number">4.5.1. </span>Scenario</a><a class="headerlink" href="#scenario" title="Link to this heading"></a></h3>
<p>Suppose you want to add a new column <code class="docutils literal notranslate"><span class="pre">new_field</span></code> to an existing table
<code class="docutils literal notranslate"><span class="pre">v_edit_node</span></code>.</p>
<ol class="arabic simple">
<li><p><strong>Update the base DDL</strong> so that new projects include the field.</p></li>
<li><p><strong>Update the base DML</strong> if the new field needs default values.</p></li>
<li><p><strong>Create an update script</strong> under <code class="docutils literal notranslate"><span class="pre">dbmodel/updates/</span></code> so that existing
projects can be migrated to the new schema when the plugin is updated.</p></li>
</ol>
</section>
<section id="step-1-modify-ddl-for-new-projects">
<h3><a class="toc-backref" href="#id14" role="doc-backlink"><span class="section-number">4.5.2. </span>Step 1 – Modify DDL for new projects</a><a class="headerlink" href="#step-1-modify-ddl-for-new-projects" title="Link to this heading"></a></h3>
<p>The base table definitions are stored in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbmodel</span><span class="o">/</span><span class="n">ddl</span><span class="o">/</span><span class="n">ddl</span><span class="o">.</span><span class="n">sql</span>
</pre></div>
</div>
<p>Actions:</p>
<ul class="simple">
<li><p>Locate the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement for <code class="docutils literal notranslate"><span class="pre">v_edit_node</span></code>.</p></li>
<li><p>Add the new column definition (type, constraints, default value, etc.).</p></li>
<li><p>Respect the existing style: indentation, type checking using
<code class="docutils literal notranslate"><span class="pre">CHECK</span> <span class="pre">(typeof(...))</span></code> where applicable, and naming conventions.</p></li>
</ul>
<p>After this change, <strong>newly created</strong> project GeoPackages will contain the new
column.</p>
</section>
<section id="step-2-modify-dml-for-default-data">
<h3><a class="toc-backref" href="#id15" role="doc-backlink"><span class="section-number">4.5.3. </span>Step 2 – Modify DML for default data</a><a class="headerlink" href="#step-2-modify-dml-for-default-data" title="Link to this heading"></a></h3>
<p>Initial data population is defined in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbmodel</span><span class="o">/</span><span class="n">dml</span><span class="o">/</span><span class="n">dml</span><span class="o">.</span><span class="n">sql</span>
</pre></div>
</div>
<p>If your new column requires a specific default value or must be populated for
system tables:</p>
<ul class="simple">
<li><p>Extend the corresponding <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statements.</p></li>
<li><p>Or add explicit <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> statements that set appropriate default values
for the new column.</p></li>
</ul>
<p>Again, follow the existing style and structure of the file.</p>
</section>
<section id="step-3-add-an-update-script-for-existing-projects">
<h3><a class="toc-backref" href="#id16" role="doc-backlink"><span class="section-number">4.5.4. </span>Step 3 – Add an update script for existing projects</a><a class="headerlink" href="#step-3-add-an-update-script-for-existing-projects" title="Link to this heading"></a></h3>
<p>Existing projects will not see the new column unless you add an update
script under:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbmodel</span><span class="o">/</span><span class="n">updates</span><span class="o">/&lt;</span><span class="n">major</span><span class="o">&gt;/&lt;</span><span class="n">minor</span><span class="o">&gt;/&lt;</span><span class="n">patch</span><span class="o">&gt;/</span>
</pre></div>
</div>
<p>For example, if you are preparing version <code class="docutils literal notranslate"><span class="pre">1.2.0</span></code>, you might have:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbmodel</span><span class="o">/</span><span class="n">updates</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="n">ddl</span><span class="o">.</span><span class="n">sql</span>
<span class="n">dbmodel</span><span class="o">/</span><span class="n">updates</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="n">dml</span><span class="o">.</span><span class="n">sql</span>
<span class="n">dbmodel</span><span class="o">/</span><span class="n">updates</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="n">changelog</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Typical actions in the update scripts:</p>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">ddl.sql</span></code>:</p>
<ul>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code> statements to add the new column to the existing
tables.</p></li>
<li><p>Adjust indexes, triggers or views that depend on the modified table, if
needed.</p></li>
</ul>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">dml.sql</span></code>:</p>
<ul>
<li><p>Initialize the new column for existing records (for example with a
default value or a computed value based on existing fields).</p></li>
</ul>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">changelog.txt</span></code>:</p>
<ul>
<li><p>Document the change (what table/column was added or modified, and why).</p></li>
</ul>
</li>
</ul>
<p>Remember that, as explained in <a class="reference internal" href="dbmodel.html"><span class="doc">DB Model</span></a>, <strong>updates must also be
reflected in the base files</strong> (<code class="docutils literal notranslate"><span class="pre">dbmodel/ddl/ddl.sql</span></code> and
<code class="docutils literal notranslate"><span class="pre">dbmodel/dml/dml.sql</span></code>) so that new projects and upgraded projects share the
same schema.</p>
</section>
</section>
<section id="versioning-and-testing">
<h2><a class="toc-backref" href="#id17" role="doc-backlink"><span class="section-number">4.6. </span>Versioning and testing</a><a class="headerlink" href="#versioning-and-testing" title="Link to this heading"></a></h2>
<p>Whenever you introduce schema changes or new Processing algorithms or major
UI features:</p>
<ol class="arabic simple">
<li><p>Increment the version in the appropriate place (plugin metadata and
<code class="docutils literal notranslate"><span class="pre">dbmodel/updates</span></code> folder structure).</p></li>
<li><p>Create a <strong>new project</strong> with the updated plugin to verify the base DDL
and DML.</p></li>
<li><p>Open an <strong>existing project</strong> and run the update logic to ensure that the
<code class="docutils literal notranslate"><span class="pre">updates/&lt;major&gt;/&lt;minor&gt;/&lt;patch&gt;</span></code> scripts correctly migrate the
database.</p></li>
<li><p>Run the automated tests shipped with the plugin if available, and add
new tests when appropriate.</p></li>
<li><p>Document user‑visible changes in the changelog files and in the user
manual when relevant.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="python.html" class="btn btn-neutral float-left" title="3. Python code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../for-admins/index.html" class="btn btn-neutral float-right" title="IberGIS Administrator Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, IberGIS.
      <span class="lastupdated">Last updated on 2025 Dec 09, 10:22 +0100.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div
	class="rst-versions"
	data-toggle="rst-versions"
	role="note"
	aria-label="versions"
>
	<span class="rst-current-version" data-toggle="rst-current-version">
		<span class="fa fa-info-circle"> IberGIS Documentation </span>
		v: 1.0
		<span class="fa fa-caret-down"></span>
	</span>

	<div class="rst-other-versions">
		<dl>
			<dt>Languages</dt>
			
			<dd><a href="https://ibergis.github.io/1.0/en/docs/ibergis/for-developers/examples.html">en</a></dd>
			
		</dl>

		<dl>
			<dt>Versions</dt>
			
			<dd>
				<a href="https://ibergis.github.io/1.0/en/docs/ibergis/for-developers/examples.html">1.0</a>
			</dd>
			
		</dl>

		
	</div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>